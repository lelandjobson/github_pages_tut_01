<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>{{ page.title }}</title>
  {% if page.description %}
  <meta name="description" content="{{ page.description }}">{% endif %}
  <meta name="author" content="{{ site.author.name }}">

  <!-- Enable responsive viewport -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Le styles -->
  <link href="{{ ASSET_PATH }}/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="{{ ASSET_PATH }}/css/style.css?body=1" rel="stylesheet" type="text/css" media="all">
  <link href="{{ ASSET_PATH }}/css/fonts.css" rel="stylesheet" type="text/css" media="all">
  <link href="{{ ASSET_PATH }}/css/images.css" rel="stylesheet" type="text/css" media="all">
  <link href="{{ BASE_PATH }}/assets/themes/scripts/vakata-tree/themes/default/style.css" rel="stylesheet" />

  <!-- FontAwesome -->
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU"
    crossorigin="anonymous">

  <!-- atom & rss feed -->
  <!-- <link href="{{ BASE_PATH }}{{ site.JB.atom_path }}" type="application/atom+xml" rel="alternate" title="Sitewide ATOM Feed">
    <link href="{{ BASE_PATH }}{{ site.JB.rss_path }}" type="application/rss+xml" rel="alternate" title="Sitewide RSS Feed">   -->

  <!-- jquery is used in the nav and the bg change  -->
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>

  <!-- jsTree TreeView side navigation script -->
  <script src="{{ BASE_PATH }}/assets/themes/scripts/vakata-tree/jstree.js"></script>

  <!-- Script to transform the sidenav into a treeview -->
  <script>
    $(function () {
        // $('#jsTreeNav').jstree();
        $('#jsTreeNav')
          // listen for event
          .on('select_node.jstree', function (e, data) {
            console.log("Tree item selected", data.node.a_attr.href);
            if(data.node.a_attr.href != "" && data.node.a_attr.href != "#"){ window.location.href = data.node.a_attr.href; }
          })
          .on('click', '.jstree-anchor', function (e) {
            $('#jsTreeNav').jstree(true).toggle_node(e.target);
          })
          // create the instance
          .jstree({
            // core : {
            //   dblclick_toggle : false
            // }
          });
      });
  </script>
  <!-- Script to apply collapsible behavior to the sidebar -->
  <script>
    $(document).ready(function () {
      $("#sidebar").mCustomScrollbar({
          theme: "minimal"
      });
      $('#sidebarCollapse').on('click', function () {
          // open or close navbar
          $('#sidebar').toggleClass('active');
          // close dropdowns
          $('.collapse.in').toggleClass('in');
          // and also adjust aria-expanded attributes we use for the open/closed arrows
          // in our CSS
          $('a[aria-expanded=true]').attr('aria-expanded', 'false');
      });
    });
  </script>
  <!-- Script to apply modal blow-ups to images on the page -->
  <script>
    // Get the modal
    $(function () {
        var modal = document.getElementById('myModal');

        // Get the image and insert it inside the modal - use its "alt" text as a caption
        var modalImg = $("#img01");
        var captionText = document.getElementById("caption");
        console.log($('.content'));
        $("p").children('img').each(function (index, value) {
          console.log("Found an image",value);
          value.click(function(){
              modal.style.display = "block";
              var newSrc = this.src;
              modalImg.attr('src', newSrc);
              captionText.innerHTML = this.alt;
            });
        });
        console.log("Hello im here");

        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];

        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
          modal.style.display = "none";
        }
    });
  </script>
  <!-- Script to get thumbnails of sketchfab models via the api -->
  <script>
    const sfUrl ='https://api.sketchfab.com/v3/models/'
  // Test id
  function CreateProjectCard(projName, projDesc, projUrl, sfId){
    let sfThumbUrl = sfUrl + sfId;
    fetch(sfThumbUrl)
    .then((response => response.json()))
    .then(function(data){
      console.log("This is my data",data);
      let thumb = data ? data.thumbnails.images[2].url : '';
      // Generate card
      let card = '';
      card += '<div class="card">'
        card += '<img class="card-img-top" src="'+ thumb + '">';
        card += '<div class="card-body">'
          card += '<h5 class="card-title">'+ projName +'</h5>';
          card += '<p class="card-text">' + projDesc + '</p>';
        card += '</div>';
      card += '</div>';
      $('#projCards').append(card);
    });
  }
  </script>
  <!-- Popper.JS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ"
    crossorigin="anonymous"></script>
  <!-- Bootstrap JS -->
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm"
    crossorigin="anonymous"></script>
  <!-- jQuery Custom Scroller CDN -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/malihu-custom-scrollbar-plugin/3.1.5/jquery.mCustomScrollbar.concat.min.js"></script>
  <!-- Scrollbar Custom CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/malihu-custom-scrollbar-plugin/3.1.5/jquery.mCustomScrollbar.min.css">

</head>

<body>
  <!-- SIDEBAR AND CONTENT -->
  <div class="wrapper">

    <!-- SIDEBAR -->
    <nav id="sidebar" class="active">
      <div id="jsTreeNav" class="sidenav">
        <ul>
          {% assign myCats = site.pages | group_by: 'category' %}
          {% for cat in myCats %}
          <!-- Create the category header -->
          {% if cat.name != "" %}
          <li data-jstree='{"opened":true, "icon":"fa fa-cubes"}'>{{ cat.name}}
            <ul>
              {% assign subCats = cat.items | group_by: 'subcategory' %}
              {% for subcat in subCats %}

              {% if subcat.name != "None" %}

              {% assign items = subcat.items | sort: 'order' %}

              {% if page.field-guide == subcat.name %}
              <li data-jstree='{"opened":true, "icon":"fa fa-book"}' class="nav-header currentguide">{{ subcat.name }}
                {% else %}
              <li data-jstree='{"icon":"fa fa-book"}' class="nav-header currentguide">{{ subcat.name }}
                {% endif %}
                <ul>
                  {% for item in items %}
                  <!-- {% capture nowunix %}{{'now' | date: '%s'}}{% endcapture %} -->

                  {% if item.title == "Quick Start" %}

                  {% if item.url == page.url %}
                  <li data-jstree='{"selected":true,"icon":"fa fa-bolt"}' class="nav-item current newItem"><a>{{
                      item.title }}</a></li>
                  {% else %}
                  <li data-jstree='{"icon":"fa fa-bolt"}' class="nav-item"><a href="{{ BASE_PATH }}{{ item.url }}">{{
                      item.title }}</a></li>
                  {% endif %}

                  {% else %}

                  {% case cat.name %}
                  {% when 'Principles' %}
                  {% assign myIcon = '"fa fa-code-branch"' %}
                  {% when 'Processes' %}
                  {% assign myIcon = '"fa fa-link"' %}
                  {% when 'Projects' %}
                  {% assign myIcon = '"fa fa-project-diagram"' %}
                  {% when 'Platforms' %}
                  {% capture myIcon %}
                  "{{ BASE_PATH }}{{ item.dir }}/{{ item.title | downcase }}.png"
                  {% endcapture %}
                  {% else %}
                  {% assign myIcon = "fa fa-book" %}
                  {% endcase %}

                  {% if item.url == page.url %}
                  <li data-jstree='{"selected":true,"icon":{{ myIcon }} }' class="nav-item current newItem"><a>{{
                      item.title }}</a></li>
                  {% else %}
                  <li data-jstree='{"icon":{{ myIcon }} }' class="nav-item"><a href="{{ BASE_PATH }}{{ item.url }}">{{
                      item.title }}</a></li>
                  {% endif %}

                  {% endif %}

                  {% endfor %}

                </ul>
                {% endif %}
              </li>
              {% endfor %}
            </ul>
          </li>
          {% endif %}
          {% endfor %}
        </ul>
      </div>
    </nav>
    <!-- CONTENT (post.html, home.html, etc.) -->
    <div id="content">
        <!-- TOP NAV -->
        <div style="position: fixed; left: 20px; top: 20px">
            <img class=" navbar-brand " src="https://lelandjobson.github.io/github_pages_tut_01/assets/images/global/itl_white_clear.png">
        </div>
        <div style="position: fixed; right: 20px; top: 20px">
            <form class="form-inline my-2 my-lg-0">
              <input class="form-control mr-sm-2" type="search" placeholder="Search Topics" aria-label="Search">
              <button id="sidebarCollapse" class="btn btn-outline-secondary my-2 my-sm-0" type="button">Library</button>
            </form>
        </div>
        <!-- CONTENT -->
        <div class="container container-narrow">
            {{ content }}
        </div>
    </div>

  </div>

</body>

</html>